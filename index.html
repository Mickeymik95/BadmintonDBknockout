<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <title>Double Elimination Scoring System</title>
    <style>
        :root { --win: #2ecc71; --lose: #e74c3c; --bg: #121212; --card: #252525; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; padding: 20px; }
        
        .controls { margin-bottom: 30px; background: #333; padding: 15px; border-radius: 8px; display: flex; gap: 10px; align-items: center; }
        input[type="number"] { padding: 8px; border-radius: 4px; border: 1px solid #555; background: #000; color: white; width: 60px; }
        button { padding: 10px 20px; background: #00ffcc; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; color: #000; }

        .bracket-row { display: flex; gap: 40px; align-items: flex-start; margin-bottom: 50px; overflow-x: auto; padding-bottom: 20px; }
        .round { display: flex; flex-direction: column; gap: 30px; justify-content: center; }
        
        /* Kotak Perlawanan */
        .match-card { background: var(--card); border: 1px solid #444; border-radius: 6px; width: 180px; overflow: hidden; }
        .match-header { background: #444; font-size: 0.7rem; padding: 4px 8px; display: flex; justify-content: space-between; }
        
        .team-row { display: flex; align-items: center; justify-content: space-between; padding: 8px; border-bottom: 1px solid #333; }
        .team-name { font-size: 0.85rem; flex-grow: 1; }
        
        /* Input Skor */
        .score-input { 
            width: 35px; border: none; background: #444; color: white; 
            text-align: center; padding: 4px; border-radius: 3px; font-weight: bold;
        }

        /* Warna Dinamik */
        .win { background-color: var(--win) !important; color: white; }
        .lose { background-color: var(--lose) !important; color: white; }

        h2 { color: #00ffcc; font-size: 1.2rem; text-transform: uppercase; letter-spacing: 1px; }
    </style>
</head>
<body>

    <div class="controls">
        <label>Jumlah Pasukan:</label>
        <input type="number" id="teamCount" value="4">
        <button onclick="renderTournament()">Jana Kejohanan</button>
    </div>

    <h2 id="wTitle">Laluan Atas (Winners) âž” Grand Final</h2>
    <div class="bracket-row" id="winnersContainer"></div>

    <h2 id="lTitle">Laluan Bawah (Losers)</h2>
    <div class="bracket-row" id="losersContainer"></div>

    <script>
        function renderTournament() {
            const n = parseInt(document.getElementById('teamCount').value);
            const winnersContainer = document.getElementById('winnersContainer');
            const losersContainer = document.getElementById('losersContainer');
            
            winnersContainer.innerHTML = '';
            losersContainer.innerHTML = '';

            let matchCounter = 1;
            let rounds = Math.ceil(Math.log2(n));

            // Generate Winners
            for (let i = 0; i <= rounds; i++) {
                let roundDiv = document.createElement('div');
                roundDiv.className = 'round';
                let matchesInRound = (i === rounds) ? 1 : Math.max(1, Math.pow(2, rounds - i - 1));
                
                for (let j = 0; j < matchesInRound; j++) {
                    roundDiv.appendChild(createMatchBox(matchCounter++));
                }
                winnersContainer.appendChild(roundDiv);
            }

            // Generate Losers (Simplified logic for visual)
            let loserRounds = (rounds * 2) - 2;
            for (let i = 0; i < loserRounds; i++) {
                let roundDiv = document.createElement('div');
                roundDiv.className = 'round';
                let matchesInRound = Math.max(1, Math.floor(n / 4));
                for (let j = 0; j < matchesInRound; j++) {
                    roundDiv.appendChild(createMatchBox(matchCounter++));
                }
                losersContainer.appendChild(roundDiv);
                if (matchesInRound === 1 && i >= 1) break;
            }
        }

        function createMatchBox(id) {
            const div = document.createElement('div');
            div.className = 'match-card';
            div.innerHTML = `
                <div class="match-header"><span>PERLAWANAN #${id}</span></div>
                <div class="team-row">
                    <span class="team-name">Pasukan A</span>
                    <input type="number" class="score-input" oninput="updateColors(this)" placeholder="0">
                </div>
                <div class="team-row">
                    <span class="team-name">Pasukan B</span>
                    <input type="number" class="score-input" oninput="updateColors(this)" placeholder="0">
                </div>
            `;
            return div;
        }

        function updateColors(input) {
            const card = input.closest('.match-card');
            const inputs = card.querySelectorAll('.score-input');
            const s1 = parseInt(inputs[0].value);
            const s2 = parseInt(inputs[1].value);

            // Reset warna
            inputs[0].className = 'score-input';
            inputs[1].className = 'score-input';

            if (!isNaN(s1) && !isNaN(s2)) {
                if (s1 > s2) {
                    inputs[0].classList.add('win');
                    inputs[1].classList.add('lose');
                } else if (s2 > s1) {
                    inputs[1].classList.add('win');
                    inputs[0].classList.add('lose');
                }
            }
        }

        renderTournament();
    </script>
</body>
</html>
